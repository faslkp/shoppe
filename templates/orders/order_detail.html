{% extends 'base.html' %}

{% block content %}
  <h2>Order #{{ order.id }}</h2>
  <div class="card mb-4">
    <div class="card-body">
      <strong>Status:</strong>
      <span class="badge 
        {% if order.status == 'pending' %} bg-secondary
        {% elif order.status == 'processing' %} bg-info
        {% elif order.status == 'shipped' %} bg-primary
        {% elif order.status == 'delivered' %} bg-success
        {% elif order.status == 'cancelled' %} bg-danger
        {% else %} bg-light text-dark
        {% endif %}
      ">
        {{ order.get_status_display }}
      </span>
      <br>
      <strong>Placed on:</strong> {{ order.created_at|date:"M d, Y H:i" }}
      <br>
      <strong>Shipping Address:</strong>
      <div class="ms-3">
        {{ order.address.address_line_1 }}<br>
        {% if order.address.address_line_2 %}
          {{ order.address.address_line_2 }}<br>
        {% endif %}
        {{ order.address.city }}, {{ order.address.state }} {{ order.address.zip_code }}<br>
        {{ order.address.country }}
      </div>
    </div>
  </div>

  <h4 class="mb-3">Order Items</h4>
  <div class="table-responsive">
    <table class="table align-middle">
      <thead>
        <tr>
          <th>Product</th>
          <th>Unit Price</th>
          <th>Quantity</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        {% for item in order_items %}
        <tr>
          <td>
            {{ item.product.name }}
          </td>
          <td>
            {{ item.price }}
          </td>
          <td>
            {{ item.quantity }}
          </td>
          <td>
            {{ item.subtotal }}
          </td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3" class="text-end"><strong>Total Amount:</strong></td>
          <td><strong>{{ order.total_amount }}</strong></td>
        </tr>
      </tfoot>
    </table>
  </div>
{% endblock %}
